import{_ as A}from"./DLfX0br8.js";import{p as K,q as ee,x as $,y as L,z as G,A as te,B as ae,c as S,C as se,f as D,D as w,E as ne,G as oe,H as ie,I as re,J as le,K as q,L as ce,M as ue,i as F,r as R,N as de,O as J,P as fe,Q as he,R as Q,S as _e,T as ve,U as ge,u as ye,a as m,g as H,b as T,w as k,t as P,o as j,d as V,F as me,h as be,n as pe}from"#entry";import De from"./Cj617YEl.js";const we=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],xe=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",O=[];class Ce{_data=new N;_hash=new N([...we]);_nDataBytes=0;_minBufferSize=0;finalize(t){t&&this._append(t);const e=this._nDataBytes*8,a=this._data.sigBytes*8;return this._data.words[a>>>5]|=128<<24-a%32,this._data.words[(a+64>>>9<<4)+14]=Math.floor(e/4294967296),this._data.words[(a+64>>>9<<4)+15]=e,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(t,e){const a=this._hash.words;let n=a[0],r=a[1],i=a[2],o=a[3],f=a[4],y=a[5],c=a[6],l=a[7];for(let d=0;d<64;d++){if(d<16)O[d]=t[e+d]|0;else{const x=O[d-15],v=(x<<25|x>>>7)^(x<<14|x>>>18)^x>>>3,g=O[d-2],C=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;O[d]=v+O[d-7]+C+O[d-16]}const p=f&y^~f&c,_=n&r^n&i^r&i,u=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=(f<<26|f>>>6)^(f<<21|f>>>11)^(f<<7|f>>>25),h=l+b+p+xe[d]+O[d],B=u+_;l=c,c=y,y=f,f=o+h|0,o=i,i=r,r=n,n=h+B|0}a[0]=a[0]+n|0,a[1]=a[1]+r|0,a[2]=a[2]+i|0,a[3]=a[3]+o|0,a[4]=a[4]+f|0,a[5]=a[5]+y|0,a[6]=a[6]+c|0,a[7]=a[7]+l|0}_append(t){typeof t=="string"&&(t=N.fromUtf8(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(t){let e,a=this._data.sigBytes/64;t?a=Math.ceil(a):a=Math.max((a|0)-this._minBufferSize,0);const n=a*16,r=Math.min(n*4,this._data.sigBytes);if(n){for(let i=0;i<n;i+=16)this._doProcessBlock(this._data.words,i);e=this._data.words.splice(0,n),this._data.sigBytes-=r}return new N(e,r)}}class N{words;sigBytes;constructor(t,e){t=this.words=t||[],this.sigBytes=e===void 0?t.length*4:e}static fromUtf8(t){const e=unescape(encodeURIComponent(t)),a=e.length,n=[];for(let r=0;r<a;r++)n[r>>>2]|=(e.charCodeAt(r)&255)<<24-r%4*8;return new N(n,a)}toBase64(){const t=[];for(let e=0;e<this.sigBytes;e+=3){const a=this.words[e>>>2]>>>24-e%4*8&255,n=this.words[e+1>>>2]>>>24-(e+1)%4*8&255,r=this.words[e+2>>>2]>>>24-(e+2)%4*8&255,i=a<<16|n<<8|r;for(let o=0;o<4&&e*8+o*6<this.sigBytes*8;o++)t.push(Be.charAt(i>>>6*(3-o)&63))}return t.join("")}concat(t){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let e=0;e<t.sigBytes;e++){const a=t.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=a<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<t.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=t.words[e>>>2];this.sigBytes+=t.sigBytes}}function Pe(s){return new Ce().finalize(s).toBase64()}function E(s){return Pe(K(s))}const Oe={trailing:!0};function Te(s,t=25,e={}){if(e={...Oe,...e},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let a,n,r=[],i,o;const f=(l,d)=>(i=Se(s,l,d),i.finally(()=>{if(i=null,e.trailing&&o&&!n){const p=f(l,o);return o=null,p}}),i),y=function(...l){return e.trailing&&(o=l),i||new Promise(d=>{const p=!n&&e.leading;clearTimeout(n),n=setTimeout(()=>{n=null;const _=e.leading?a:f(this,l);o=null;for(const u of r)u(_);r=[]},t),p?(a=f(this,l),d(a)):r.push(d)})},c=l=>{l&&(clearTimeout(l),n=null)};return y.isPending=()=>!!n,y.cancel=()=>{c(n),r=[],o=null},y.flush=()=>{if(c(n),!o||i)return;const l=o;return o=null,f(this,l)},y}async function Se(s,t,e){return await s.apply(t,e)}const X=Symbol.for("nuxt:client-only"),Ee=ee({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(s,{slots:t,attrs:e}){const a=$(!1);L(()=>{a.value=!0});const n=G();return n&&(n._nuxtClientOnly=!0),se(X,!0),()=>{if(a.value){const f=t.default?.();return f&&f.length===1?[te(f[0],e)]:f}const r=t.fallback||t.placeholder;if(r)return ae(r);const i=s.fallback||s.placeholder||"",o=s.fallbackTag||s.placeholderTag||"span";return S(o,e,i)}}});function Re(...s){const t=typeof s[s.length-1]=="string"?s.pop():void 0;Ne(s[0],s[1])&&s.unshift(t);let[e,a,n={}]=s,r=!1;const i=D(()=>w(e));if(typeof i.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof a!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const o=ne();n.server??=!0,n.default??=je,n.getCachedData??=Z,n.lazy??=!1,n.immediate??=!0,n.deep??=oe.deep,n.dedupe??="cancel",n._functionName,o._asyncData[i.value];function f(){const _={cause:"initial",dedupe:n.dedupe};return o._asyncData[i.value]?._init||(_.cachedData=n.getCachedData(i.value,o,{cause:"initial"}),o._asyncData[i.value]=W(o,i.value,a,n,_.cachedData)),()=>o._asyncData[i.value].execute(_)}const y=f(),c=o._asyncData[i.value];c._deps++;const l=n.server!==!1&&o.payload.serverRendered;{let _=function(v){const g=o._asyncData[v];g?._deps&&(g._deps--,g._deps===0&&g?._off())};const u=G();if(u&&l&&n.immediate&&!u.sp&&(u.sp=[]),u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const v=u._nuxtOnBeforeMountCbs;ie(()=>{v.forEach(g=>{g()}),v.splice(0,v.length)}),re(()=>v.splice(0,v.length))}const b=u&&(u._nuxtClientOnly||le(X,!1));l&&o.isHydrating&&(c.error.value||c.data.value!==void 0)?c.status.value=c.error.value?"error":"success":u&&(!b&&o.payload.serverRendered&&o.isHydrating||n.lazy)&&n.immediate?u._nuxtOnBeforeMountCbs.push(y):n.immediate&&c.status.value!=="success"&&y();const h=ue(),B=q(i,(v,g)=>{if((v||g)&&v!==g){r=!0;const C=o._asyncData[g]?.data.value!==void 0,z=o._asyncDataPromises[g]!==void 0,U={cause:"initial",dedupe:n.dedupe};if(!o._asyncData[v]?._init){let M;g&&C?M=o._asyncData[g].data.value:(M=n.getCachedData(v,o,{cause:"initial"}),U.cachedData=M),o._asyncData[v]=W(o,v,a,n,M)}o._asyncData[v]._deps++,g&&_(g),(n.immediate||C||z)&&o._asyncData[v].execute(U),he(()=>{r=!1})}},{flush:"sync"}),x=n.watch?q(n.watch,()=>{r||c._execute({cause:"watch",dedupe:n.dedupe})}):()=>{};h&&ce(()=>{B(),x(),_(i.value)})}const d={data:I(()=>o._asyncData[i.value]?.data),pending:I(()=>o._asyncData[i.value]?.pending),status:I(()=>o._asyncData[i.value]?.status),error:I(()=>o._asyncData[i.value]?.error),refresh:(..._)=>o._asyncData[i.value]?._init?o._asyncData[i.value].execute(..._):f()(),execute:(..._)=>d.refresh(..._),clear:()=>Y(o,i.value)},p=Promise.resolve(o._asyncDataPromises[i.value]).then(()=>d);return Object.assign(p,d),p}function I(s){return D({get(){return s()?.value},set(t){const e=s();e&&(e.value=t)}})}function Ne(s,t){return!(typeof s=="string"||typeof s=="object"&&s!==null||typeof s=="function"&&typeof t=="function")}function Y(s,t){t in s.payload.data&&(s.payload.data[t]=void 0),t in s.payload._errors&&(s.payload._errors[t]=void 0),s._asyncData[t]&&(s._asyncData[t].data.value=F(s._asyncData[t]._default()),s._asyncData[t].error.value=void 0,s._asyncData[t].status.value="idle"),t in s._asyncDataPromises&&(s._asyncDataPromises[t]&&(s._asyncDataPromises[t].cancelled=!0),s._asyncDataPromises[t]=void 0)}function ze(s,t){const e={};for(const a of t)e[a]=s[a];return e}function W(s,t,e,a,n){s.payload._errors[t]??=void 0;const r=a.getCachedData!==Z,i=e,o=a.deep?R:$,f=n!==void 0,y=s.hook("app:data:refresh",async l=>{(!l||l.includes(t))&&await c.execute({cause:"refresh:hook"})}),c={data:o(f?n:a.default()),pending:D(()=>c.status.value==="pending"),error:de(s.payload._errors,t),status:$("idle"),execute:(...l)=>{const[d,p=void 0]=l,_=d&&p===void 0&&typeof d=="object"?d:{};if(s._asyncDataPromises[t]){if((_.dedupe??a.dedupe)==="defer")return s._asyncDataPromises[t];s._asyncDataPromises[t].cancelled=!0}{const b="cachedData"in _?_.cachedData:a.getCachedData(t,s,{cause:_.cause??"refresh:manual"});if(b!==void 0)return s.payload.data[t]=c.data.value=b,c.error.value=void 0,c.status.value="success",Promise.resolve(b)}c.status.value="pending";const u=new Promise((b,h)=>{try{b(i(s))}catch(B){h(B)}}).then(async b=>{if(u.cancelled)return s._asyncDataPromises[t];let h=b;a.transform&&(h=await a.transform(b)),a.pick&&(h=ze(h,a.pick)),s.payload.data[t]=h,c.data.value=h,c.error.value=void 0,c.status.value="success"}).catch(b=>{if(u.cancelled)return s._asyncDataPromises[t];c.error.value=fe(b),c.data.value=F(a.default()),c.status.value="error"}).finally(()=>{u.cancelled||delete s._asyncDataPromises[t]});return s._asyncDataPromises[t]=u,s._asyncDataPromises[t]},_execute:Te((...l)=>c.execute(...l),0,{leading:!0}),_default:a.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{y(),s._asyncData[t]?._init&&(s._asyncData[t]._init=!1),r||J(()=>{s._asyncData[t]?._init||(Y(s,t),c.execute=()=>Promise.resolve())})}};return c}const je=()=>{},Z=(s,t,e)=>{if(t.isHydrating)return t.payload.data[s];if(e.cause!=="refresh:manual"&&e.cause!=="refresh:hook")return t.static.data[s]};function Fe(s,t,e){const[a={},n]=[{},t],r=D(()=>w(s)),i=D(()=>w(a.key)||"$f"+E([n,typeof r.value=="string"?r.value:"",...Me(a)]));if(!a.baseURL&&typeof r.value=="string"&&r.value[0]==="/"&&r.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:o,lazy:f,default:y,transform:c,pick:l,watch:d,immediate:p,getCachedData:_,deep:u,dedupe:b,...h}=a,B=Q({..._e,...h,cache:typeof a.cache=="boolean"?void 0:a.cache}),x={server:o,lazy:f,default:y,transform:c,pick:l,immediate:p,getCachedData:_,deep:u,dedupe:b,watch:d===!1?[]:[...d||[],B]};let v;return Re(d===!1?i.value:i,()=>{v?.abort?.(new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),v=typeof AbortController<"u"?new AbortController:{};const C=w(a.timeout);let z;return C&&(z=setTimeout(()=>v.abort(new DOMException("Request aborted due to timeout.","AbortError")),C),v.signal.onabort=()=>clearTimeout(z)),(a.$fetch||globalThis.$fetch)(r.value,{signal:v.signal,...B}).finally(()=>{clearTimeout(z)})},x)}function Me(s){const t=[w(s.method)?.toUpperCase()||"GET",w(s.baseURL)];for(const e of[s.params||s.query]){const a=w(e);if(!a)continue;const n={};for(const[r,i]of Object.entries(a))n[w(r)]=w(i);t.push(n)}if(s.body){const e=w(s.body);if(!e)t.push(E(e));else if(e instanceof ArrayBuffer)t.push(E(Object.fromEntries([...new Uint8Array(e).entries()].map(([a,n])=>[a,n.toString()]))));else if(e instanceof FormData){const a={};for(const n of e.entries()){const[r,i]=n;a[r]=i instanceof File?i.name:i}t.push(E(a))}else if(ve(e))t.push(E(Q(e)));else try{t.push(E(e))}catch{console.warn("[useFetch] Failed to hash body",e)}}return t}function ke(s,t){const e=R(),a=D(()=>e.value?.isBeginning??!0),n=D(()=>e.value?.isEnd??!1),r=D(()=>e.value?.activeIndex??0),i=D(()=>e.value?.realIndex??0),o=D(()=>e.value?.slides??[]),f=D(()=>e.value?.slidesPerViewDynamic()??0),y=D(()=>e.value?.progress??0),c=D(()=>e.value?.slides.length??0),l=(...h)=>{e.value&&(h.length===0?e.value.slideNext():e.value.slideNext(...h))},d=(...h)=>{e.value&&e.value.slideTo(...h)},p=(...h)=>{e.value&&(h.length===0?e.value.slideReset():e.value.slideReset(...h))},_=(...h)=>{e.value&&(h.length===0?e.value.slidePrev():e.value.slidePrev(...h))},u=()=>{!(s.value?.nodeName==="SWIPER-CONTAINER")&&e.value!==null&&!t&&console.warn('"useSwiper()" requires a ref and is tied to the %c`<swiper-container ref="swiperContainerRef"></swiper-container>` element.',"font-weight: bold;")},b=()=>{s.value&&t!==void 0&&(Object.assign(s.value,t),s.value?.initialize()),e.value=s?.value?.swiper};return q(e,()=>u()),L(()=>J(()=>b())),{instance:e,isBeginning:a,isEnd:n,activeIndex:r,realIndex:i,slides:o,slidesPerView:f,progress:y,getNumberOfSlides:c,next:l,prev:_,to:d,reset:p}}const Ie={class:"min-h-screen flex items-center justify-center bg-gray-200"},Ue={class:"relative"},Ve={class:"grid grid-cols-3 -m-1.5"},$e={class:"bg-blue-300 rounded-md px-3 py-1 m-2 cursor-pointer hover:bg-blue-200 text-white font-bold"},qe={class:"bg-blue-300 rounded-md px-3 py-1 m-2 cursor-pointer hover:bg-blue-200 text-white font-bold"},Le={class:"bg-blue-300 rounded-md px-3 py-1 m-2 cursor-pointer hover:bg-blue-200 text-white font-bold"},He={class:"bg-white py-9"},We=["src","alt"],Ge={class:"px-6 py-4"},Je={class:"font-bold text-2xl mb-2"},Qe={class:"font-bold text-xl mb-2 text-gray-400"},Xe={class:"text-gray-700 text-base h-40"},Ye={class:"px-6 pt-4 pb-5"},Ze={class:"inline-block bg-gray-300 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-8"},Ae={class:"inline-block bg-gray-300 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-8"},Ke={class:"inline-block bg-gray-300 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-8"},et=["onClick"],tt={key:0,class:"absolute p-6 w-80 rounded-md shadow-2xl z-1 bg-white top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},at={class:"font-bold text-2xl text-center"},st={class:"text-center mt-5"},rt={__name:"products",async setup(s){let t,e;const{data:a}=([t,e]=ge(()=>Fe("/api/products","$veWkk_vIRd")),t=await t,e(),t),n=R(null);R(Array.from({length:3}));const r=ke(n,{loop:!0}),i=R(null);L(()=>{console.log(r.instance)});const o=R({open:!1}),f=c=>{o.value.open=!0,i.value=c.title},y=()=>{o.value.open=!1};return ye({title:"產品"}),(c,l)=>{const d=A,p=Ee,_=De;return j(),S("div",Ie,[m("div",Ue,[m("div",Ve,[m("button",$e,[T(d,{to:"/"},{default:k(()=>[...l[4]||(l[4]=[V("代辦清單",-1)])]),_:1})]),m("button",qe,[T(d,{to:"/products"},{default:k(()=>[...l[5]||(l[5]=[V("產品頁面",-1)])]),_:1})]),m("button",Le,[T(d,{to:"/products"},{default:k(()=>[...l[6]||(l[6]=[V("投票頁面",-1)])]),_:1})])]),T(p,null,{default:k(()=>[m("swiper-container",{ref_key:"containerRef",ref:n,class:"max-w-md"},[(j(!0),S(me,null,be(F(a),(u,b)=>(j(),S("swiper-slide",{key:b,class:"rounded-sm shadow-lg bg-gray-100 mt-5 mb-10"},[o.value.open?(j(),S("div",{key:0,class:"mask",onClick:l[0]||(l[0]=h=>y())})):H("",!0),m("div",null,[m("div",He,[m("img",{class:"w-full h-60 object-contain",src:u.img,alt:u.title},null,8,We)]),m("div",Ge,[m("div",Je,P(u.title),1),m("div",Qe,P(u.author),1),m("p",Xe,P(u.content),1)]),m("div",Ye,[m("span",Ze,P(u.hashTag1),1),m("span",Ae,P(u.hashTag2),1),m("span",Ke,P(u.hashTag3),1)]),m("button",{class:pe(["absolute text-2xl rounded-full bg-blue-300 cursor-pointer text-white font-bold -bottom-6 left-1/2 -translate-x-1/2 p-2 px-5 shadow-2xl z-200",o.value.open?"bg-green-400":"bg-blue-300"]),onClick:h=>f(u)}," ＋加入書櫃 ",10,et)])]))),128))],512)]),_:1}),T(_,{name:"tabler:arrow-badge-left",class:"absolute size-15 top-1/2 -left-20 -translate-y-1/2 cursor-pointer hover:bg-blue-500",onClick:l[1]||(l[1]=u=>F(r).next())}),T(_,{class:"absolute size-15 top-1/2 -right-20 -translate-y-1/2 cursor-pointer hover:bg-blue-500",name:"tabler:arrow-badge-right",onClick:l[2]||(l[2]=u=>F(r).prev())})]),o.value.open?(j(),S("div",tt,[m("h1",at," 《"+P(i.value)+"》 已加入書櫃 ",1),m("div",st,[m("button",{class:"rounded-md px-3 py-1 cursor-pointer hover:bg-gray-200 hover:text-white text-gray-300 font-bold",onClick:l[3]||(l[3]=u=>y())}," 確定 ")])])):H("",!0)])}}};export{rt as default};
