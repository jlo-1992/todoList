import{_ as B}from"./B1NIm_nv.js";import M from"./CyYrUV9L.js";import{J as S,f as V,r as p,M as $,u as D,c as a,a as e,b as h,C as w,t as v,F as N,G as j,s as b,N as E,O as K,K as C,P as T,E as U,o as r,Q as F}from"#entry";import{u as L,a as P}from"./_Fb04UhR.js";import"./DhbN7xTE.js";import"./DlAUqK2U.js";const G={class:"min-h-screen flex items-center justify-center bg-gray-200"},H={class:"w-md h-170 text-center m-auto relative bg-gray-400 rounded-md shadow-2xl px-5 mt-5 overflow-y-auto scrollbar-hide"},J={class:"mt-2 text-right mr-3 text-white mb-3"},O={class:"bg-white pt-1 px-3 h-125 rounded-xl"},Q={class:"flex items-center justify-center ml-2"},R=["id","onUpdate:modelValue","onClick"],q=["for"],A={key:0,class:"text-xl ml-3 text-gray-300"},W={key:1,class:"text-xl ml-3 text-black"},X={class:"hover:bg-gray-200 hover:text-white cursor-pointer rounded-full p-2 px-3"},Y={class:"hover:bg-red-200 hover:text-white cursor-pointer rounded-full p-2 px-3 m-auto"},Z={key:1,class:"absolute p-7 h-45 w-80 rounded-md shadow-2xl z-200 bg-white top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},ee={class:"font-bold text-2xl text-left"},te=["placeholder"],oe={class:"text-right"},se=["value"],ce={__name:"index",setup(le){const u=L(),_=P(),{todoList:f}=S(u),I=V(()=>f.value.filter(n=>!n.done)),s=p(null),l=p(""),d=p(null),i=p({open:!1}),g=(n,t=null)=>{i.value.open=!0,s.value=n,n==="編輯"&&t?(l.value=t.text,d.value=t):(d.value=null,l.value="")},x=()=>{i.value.open=!1,s.value=null,d.value=null,l.value=""},y=()=>{if(s.value==="編輯"){const n={id:d.value.id,text:l.value};u.saveEdit(n)}else s.value==="新增"&&u.addItem(l.value);x()};return $(()=>{_.chosenBook&&u.addItem(_.chosenBook)}),D({title:"待讀"}),(n,t)=>{const z=B,k=M;return r(),a("div",G,[e("div",null,[h(z),e("div",H,[i.value.open?(r(),a("div",{key:0,class:"mask rounded-sm",onClick:t[0]||(t[0]=o=>x())})):w("",!0),t[4]||(t[4]=e("h1",{class:"text-3xl font-bold py-5 mt-5 text-white"},"我的書櫃",-1)),t[5]||(t[5]=e("hr",{class:"text-white"},null,-1)),e("p",J," 共有 "+v(I.value.length)+" 本待讀書籍 ",1),e("div",O,[e("ul",null,[(r(!0),a(N,null,j(b(f),(o,m)=>(r(),a("li",{key:m,class:"flex justify-between mt-5 items-center"},[e("div",Q,[C(e("input",{id:"check"+m,"onUpdate:modelValue":c=>o.done=c,type:"checkbox",class:"size-5 cursor-pointer",onClick:c=>b(u).doneItem(o.id)},null,8,R),[[F,o.done]]),e("label",{for:"check"+m},[o.done?(r(),a("del",A,"《"+v(o.text)+"》",1)):(r(),a("span",W,"《"+v(o.text)+"》",1))],8,q)]),e("div",null,[e("button",X,[h(k,{name:"tabler:pencil",class:"size-6 mt-1",onClick:c=>g("編輯",o)},null,8,["onClick"])]),e("button",Y,[h(k,{name:"tabler:trash",class:"size-6 mt-1",onClick:c=>b(u).deleteItem(o.id)},null,8,["onClick"])])])]))),128))])]),i.value.open?(r(),a("div",Z,[e("h1",ee,v(s.value)+"待讀書籍",1),e("form",{onSubmit:K(y,["prevent"]),onKeydown:E(y,["enter"])},[C(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value=o),type:"text",class:"border-2 border-gray-300 my-2 w-65 p-2 rounded-sm text-left",placeholder:s.value==="編輯"?d.value.text:"請輸入書名"},null,8,te),[[T,l.value]]),e("div",oe,[e("button",{class:"rounded-md px-3 py-1 cursor-pointer hover:bg-gray-200 hover:text-white text-gray-200 font-bold",onClick:t[2]||(t[2]=o=>x())}," 關閉 "),e("input",{type:"submit",value:s.value==="編輯"?"編輯":"新增",class:"rounded-md px-3 py-1 cursor-pointer hover:bg-blue-200 hover:text-white text-blue-200 font-bold"},null,8,se)])],32)])):w("",!0)]),e("button",{class:U(["absolute text-2xl rounded-full bg-blue-300 cursor-pointer text-white font-bold left-1/2 bottom-18 -translate-x-1/2 p-3 px-5 shadow-2xl z-200",i.value.open?"bg-green-400":"bg-blue-300"]),onClick:t[3]||(t[3]=o=>g("新增"))}," ＋新增 ",2)])])}}};export{ce as default};
