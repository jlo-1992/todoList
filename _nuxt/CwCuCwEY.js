import{_ as S}from"./wkmOVL9x.js";import V from"./BC8Va0yH.js";import{a8 as $,a9 as L,r as v,aa as B,f as D,u as E,c,a as e,b as _,P as I,t as x,F as M,S as j,z as g,ad as N,ae as T,ab as C,af as U,R as F,o as p,ag as K}from"#entry";import"./Bqt7doCH.js";import"./DlAUqK2U.js";const R=$("todo",()=>{const n=v([]);let a=1;return{todoList:n,id:a,addItem:l=>{n.value.push({id:a++,done:!1,text:l})},deleteItem:l=>{const o=n.value.findIndex(u=>u.id===l);o>-1&&n.value.splice(o,1)},doneItem:l=>{const o=n.value.find(u=>u.id===l);o&&(o.done=!o.done)},saveEdit:l=>{const o=n.value.findIndex(u=>u.id===l.id);o>-1&&(n.value[o].text=l.text)}}},{persist:{storage:L.localStorage(),key:"todoList",pick:["todoList"]}}),H={class:"min-h-screen flex items-center justify-center bg-gray-200"},P={class:"w-md h-170 text-center m-auto relative bg-white rounded-sm shadow-2xl px-5 mt-5 overflow-y-auto scrollbar-hide"},q={class:"mt-2 text-right mr-3 text-gray-400"},A={class:"flex items-center justify-center ml-2"},G=["id","onUpdate:modelValue","onClick"],J=["for"],O={key:0,class:"text-xl ml-3 text-gray-300"},Q={key:1,class:"text-xl ml-3"},W={class:"hover:bg-gray-200 hover:text-white cursor-pointer rounded-full p-2 px-3"},X={class:"hover:bg-red-200 hover:text-white cursor-pointer rounded-full p-2 px-3 m-auto"},Y={key:1,class:"absolute p-7 h-45 w-80 rounded-md shadow-2xl z-200 bg-white top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},Z={class:"font-bold text-2xl text-left"},ee=["placeholder"],te={class:"text-right"},oe=["value"],re={__name:"index",setup(n){const a=R(),{todoList:f}=B(a),y=D(()=>f.value.filter(i=>!i.done)),d=v(null),r=v(""),l=v(null),o=v({open:!1}),u=(i,t=null)=>{o.value.open=!0,d.value=i,i==="編輯"&&t?(r.value=t.text,l.value=t):(l.value=null,r.value="")},h=()=>{o.value.open=!1,d.value=null,l.value=null,r.value=""},k=()=>{if(d.value==="編輯"){const i={id:l.value.id,text:r.value};a.saveEdit(i)}else d.value==="新增"&&a.addItem(r.value);h()};return E({title:"待讀"}),(i,t)=>{const z=S,w=V;return p(),c("div",H,[e("div",null,[_(z),e("div",P,[o.value.open?(p(),c("div",{key:0,class:"mask rounded-sm",onClick:t[0]||(t[0]=s=>h())})):I("",!0),t[4]||(t[4]=e("h1",{class:"text-3xl font-bold py-5 mt-5"},"待讀書籍",-1)),t[5]||(t[5]=e("hr",null,null,-1)),e("p",q," 共有 "+x(y.value.length)+" 本待讀書籍 ",1),e("ul",null,[(p(!0),c(M,null,j(g(f),(s,b)=>(p(),c("li",{key:b,class:"flex justify-between mt-5 items-center"},[e("div",A,[C(e("input",{id:"check"+b,"onUpdate:modelValue":m=>s.done=m,type:"checkbox",class:"size-5 cursor-pointer",onClick:m=>g(a).doneItem(s.id)},null,8,G),[[K,s.done]]),e("label",{for:"check"+b},[s.done?(p(),c("del",O,x(s.text),1)):(p(),c("span",Q,x(s.text),1))],8,J)]),e("div",null,[e("button",W,[_(w,{name:"tabler:pencil",class:"size-6 mt-1",onClick:m=>u("編輯",s)},null,8,["onClick"])]),e("button",X,[_(w,{name:"tabler:trash",class:"size-6 mt-1",onClick:m=>g(a).deleteItem(s.id)},null,8,["onClick"])])])]))),128))]),o.value.open?(p(),c("div",Y,[e("h1",Z,x(d.value)+"待讀書籍",1),e("form",{onSubmit:T(k,["prevent"]),onKeydown:N(k,["enter"])},[C(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value=s),type:"text",class:"border-2 border-gray-300 my-2 w-65 p-2 rounded-sm text-left",placeholder:d.value==="編輯"?l.value.text:"請輸入書名"},null,8,ee),[[U,r.value]]),e("div",te,[e("button",{class:"rounded-md px-3 py-1 cursor-pointer hover:bg-gray-200 hover:text-white text-gray-200 font-bold",onClick:t[2]||(t[2]=s=>h())}," 關閉 "),e("input",{type:"submit",value:d.value==="編輯"?"編輯":"新增",class:"rounded-md px-3 py-1 cursor-pointer hover:bg-blue-200 hover:text-white text-blue-200 font-bold"},null,8,oe)])],32)])):I("",!0)]),e("button",{class:F(["absolute text-2xl rounded-full bg-blue-300 cursor-pointer text-white font-bold left-1/2 bottom-18 -translate-x-1/2 p-3 px-5 shadow-2xl z-200",o.value.open?"bg-green-400":"bg-blue-300"]),onClick:t[3]||(t[3]=s=>u("新增"))}," ＋新增 ",2)])])}}};export{re as default};
