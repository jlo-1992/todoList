import{_ as B}from"./B1NIm_nv.js";import M from"./CyYrUV9L.js";import{H as V,I as $,r as p,J as E,f as L,M as D,u as N,c as u,a as e,b as _,C,t as x,F as j,G as K,s as g,N as T,O as U,K as S,P as F,E as H,o as c,Q as P}from"#entry";import{u as G}from"./DE4rZu2W.js";import"./DhbN7xTE.js";import"./DlAUqK2U.js";const J=V("todo",()=>{const d=p([]);let a=1;return{todoList:d,id:a,addItem:t=>{d.value.push({id:a++,done:!1,text:t})},deleteItem:t=>{const s=d.value.findIndex(n=>n.id===t);s>-1&&d.value.splice(s,1)},doneItem:t=>{const s=d.value.find(n=>n.id===t);s&&(s.done=!s.done)},saveEdit:t=>{const s=d.value.findIndex(n=>n.id===t.id);s>-1&&(d.value[s].text=t.text)}}},{persist:{storage:$.localStorage(),key:"todoList",pick:["todoList"]}}),O={class:"min-h-screen flex items-center justify-center bg-gray-200"},Q={class:"w-md h-170 text-center m-auto relative bg-gray-400 rounded-md shadow-2xl px-5 mt-5 overflow-y-auto scrollbar-hide"},R={class:"mt-2 text-right mr-3 text-white mb-3"},q={class:"bg-white pt-1 px-3 h-125 rounded-xl"},A={class:"flex items-center justify-center ml-2"},W=["id","onUpdate:modelValue","onClick"],X=["for"],Y={key:0,class:"text-xl ml-3 text-gray-300"},Z={key:1,class:"text-xl ml-3 text-black"},ee={class:"hover:bg-gray-200 hover:text-white cursor-pointer rounded-full p-2 px-3"},te={class:"hover:bg-red-200 hover:text-white cursor-pointer rounded-full p-2 px-3 m-auto"},oe={key:1,class:"absolute p-7 h-45 w-80 rounded-md shadow-2xl z-200 bg-white top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},se={class:"font-bold text-2xl text-left"},le=["placeholder"],ne={class:"text-right"},ae=["value"],ve={__name:"index",setup(d){const a=J(),m=G(),{todoList:h}=E(a),y=L(()=>h.value.filter(i=>!i.done)),r=p(null),t=p(""),s=p(null),n=p({open:!1}),k=(i,o=null)=>{n.value.open=!0,r.value=i,i==="編輯"&&o?(t.value=o.text,s.value=o):(s.value=null,t.value="")},f=()=>{n.value.open=!1,r.value=null,s.value=null,t.value=""},w=()=>{if(r.value==="編輯"){const i={id:s.value.id,text:t.value};a.saveEdit(i)}else r.value==="新增"&&a.addItem(t.value);f()};return D(()=>{m.chosenBook&&a.addItem(m.chosenBook)}),N({title:"待讀"}),(i,o)=>{const z=B,I=M;return c(),u("div",O,[e("div",null,[_(z),e("div",Q,[n.value.open?(c(),u("div",{key:0,class:"mask rounded-sm",onClick:o[0]||(o[0]=l=>f())})):C("",!0),o[4]||(o[4]=e("h1",{class:"text-3xl font-bold py-5 mt-5 text-white"},"書櫃",-1)),o[5]||(o[5]=e("hr",{class:"text-white"},null,-1)),e("p",R," 共有 "+x(y.value.length)+" 本待讀書籍 ",1),e("div",q,[e("ul",null,[(c(!0),u(j,null,K(g(h),(l,b)=>(c(),u("li",{key:b,class:"flex justify-between mt-5 items-center"},[e("div",A,[S(e("input",{id:"check"+b,"onUpdate:modelValue":v=>l.done=v,type:"checkbox",class:"size-5 cursor-pointer",onClick:v=>g(a).doneItem(l.id)},null,8,W),[[P,l.done]]),e("label",{for:"check"+b},[l.done?(c(),u("del",Y,"《"+x(l.text)+"》",1)):(c(),u("span",Z,"《"+x(l.text)+"》",1))],8,X)]),e("div",null,[e("button",ee,[_(I,{name:"tabler:pencil",class:"size-6 mt-1",onClick:v=>k("編輯",l)},null,8,["onClick"])]),e("button",te,[_(I,{name:"tabler:trash",class:"size-6 mt-1",onClick:v=>g(a).deleteItem(l.id)},null,8,["onClick"])])])]))),128))])]),n.value.open?(c(),u("div",oe,[e("h1",se,x(r.value)+"待讀書籍",1),e("form",{onSubmit:U(w,["prevent"]),onKeydown:T(w,["enter"])},[S(e("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>t.value=l),type:"text",class:"border-2 border-gray-300 my-2 w-65 p-2 rounded-sm text-left",placeholder:r.value==="編輯"?s.value.text:"請輸入書名"},null,8,le),[[F,t.value]]),e("div",ne,[e("button",{class:"rounded-md px-3 py-1 cursor-pointer hover:bg-gray-200 hover:text-white text-gray-200 font-bold",onClick:o[2]||(o[2]=l=>f())}," 關閉 "),e("input",{type:"submit",value:r.value==="編輯"?"編輯":"新增",class:"rounded-md px-3 py-1 cursor-pointer hover:bg-blue-200 hover:text-white text-blue-200 font-bold"},null,8,ae)])],32)])):C("",!0)]),e("button",{class:H(["absolute text-2xl rounded-full bg-blue-300 cursor-pointer text-white font-bold left-1/2 bottom-18 -translate-x-1/2 p-3 px-5 shadow-2xl z-200",n.value.open?"bg-green-400":"bg-blue-300"]),onClick:o[3]||(o[3]=l=>k("新增"))}," ＋新增 ",2)])])}}};export{ve as default};
